<!doctype html>



  


<html class="theme-next mist use-motion">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1">






<meta name="description" content="沙滩一躺三年半，大浪来时我翻身。">
<meta property="og:type" content="website">
<meta property="og:title" content="南风">
<meta property="og:url" content="https://qcc107.github.io/page/3/index.html">
<meta property="og:site_name" content="南风">
<meta property="og:description" content="沙滩一躺三年半，大浪来时我翻身。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="南风">
<meta name="twitter:description" content="沙滩一躺三年半，大浪来时我翻身。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 南风 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">南风</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/10/自我管理的破窗效应/" itemprop="url">
                  自我管理的破窗效应
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-10T16:26:54+08:00" content="2016-04-10">
              2016-04-10
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT随笔/" itemprop="url" rel="index">
                    <span itemprop="name">IT随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>在《程序员修炼之道——从小工到专家》这本书里，有这么一段描述：

在市区，有些建筑漂亮而整洁，而另一些却是破败不堪的“废弃船只”。为什么？犯罪和城市衰退领域的研究者发现了一种迷人的触发机制，
一种能够很快将整洁、完整和有人居住的建筑变为破败的废弃物的机制[WK82]。

破窗户。

一扇破窗户，只要有那么一段时间不修理，就会渐渐给建筑的居民带来一种废弃感——一种职权部门不关心这座建筑的感觉。
于是又一扇窗户破了。人们开始乱扔垃圾。出现了乱涂乱画。严重的结构损坏开始了。在相对较短的一段时间里，
建筑就被损毁得超出了业主愿意修理的程度，而废弃感变成了现实。

“破窗户理论”启发了纽约和其他大城市的警察部门，他们对一些轻微的案件严加处理，以防止大案的发生。
这起了作用：管束破窗户、乱涂乱画和其他轻微违法事件减少了严重罪案的发生。</code></pre><p>不知道你有没有过类似这样的经验：</p>
<p>比如你坚持每天都跑步，风雨不断。一旦养成习惯，做这件事情感觉就是理所当然的。然后某天你病了，休息了一个星期，然后你会发现，原来不跑步也是可以的，还节省时间，不累。于是你慢慢就开始不跑了，于是跑步锻炼这个好习惯就被你丢了。后果呢？可能身材开始慢慢肥胖变形了，身体也不那么强健了，开始犯一些小毛病了。学习效率也开始下降了，要知道，运动能够提高大脑的活性，学习效率也会得到提高的。所以简单的一个破窗没有及时堵住，最后能导致一连串不良效果的出现。</p>
<p>又比如你坚持每天都写博客，记录代码片段，或者写点什么东西。一开始也是努力严格要求自己，必须每天都要写。然而总会有些原因让你无法写，比如出差、加班、旅游等等。发现博客断更了几天，于是就开始断更了得更厉害了，变成几周更新一次，几个月更新一次，慢慢博客就荒废了。博客是整理思维，总结所学的一个非常好的习惯。有坚持写博客习惯的人，往往思路清晰，逻辑有条理，长期以往，思维会变得活跃并深邃。所以这个习惯的丢弃，是非常可惜的，个人的成长失去一个有效的总结提升机制。长期的习惯可能都遭不住破窗的侵袭，更何况是三分钟热度的东西。</p>
<p>又比如你的工作台一开始是很整洁的，因此你心情不错，办事效率也很高（PS：国外一个研究理论，整洁的工作台能够提高你的工作效率）。但是某个时候你放了个杯子，摆了个电话，堆了些文件……慢慢桌面上的东西越来越多，也开始慢慢变乱，你没注意收拾好，于是越来越乱。最后乱得影响你工作的心情，然后办事效率低，工作表现开始变差，然后出现一连串恶性循环，比如因为表现不好得不到领导的赏识了，升迁受阻，个人精神开始颓滞等。仅仅因为一个工作台的破窗，就可能影响到一个人的职业发展。可能有点夸张，但工作优秀的人，桌面基本都是一直保持得很整洁的。</p>
<p>再举一个最简单的例子。你打算每个月存5000元，一开始也确实将5000元存进银行或者各种地方了。然后你看到某个东西你很喜欢，也不贵，就剁手买买买了。当5000元变成4xxx时，破窗就开始出现了，你会继续被各种消费欲望驱使，最后全花光了。而如果一开始你忍住不剁手的话，也许5000元也许就可以全存下了。一百元不找散的话，是不是可以在钱包里呆得比较久呢？又或者那一百元是崭新的新版土豪金，又是不是会呆得更久呢？破窗这个东西很神奇。</p>
<p>优秀往往来源于好习惯，而习惯优秀则能走向卓越。偶尔看到一些对学神的采访，问为什么学习能这么厉害。学神无非就说，坚持早读啊，坚持晚上学习到多晚等等。看似简单，但是要你每天都做那可就不简单了。学渣坚持早读晚修，努力学习，也许一年就可以变学民了。再坚持个三年，也许就可以变学霸了。而一直坚持下去，始终不落下这个习惯，也许就能成为学神了。学神诚不欺余也。</p>
<p>所以好习惯的重要性不言而喻。好习惯是靠坚持养出来的，而注意防范自我管理中的破窗，非常重要。一个小小的懈怠，也许就能毁掉你十年的习惯。严格要求自己，不要让懒惰滋生破窗。</p>
<p>本文转自<a href="http://www.nowamagic.net/librarys/veda/detail/2816" target="_blank" rel="noopener">自我管理中的破窗效应</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/24/Vim命令合集/" itemprop="url">
                  Vim命令合集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-24T14:25:11+08:00" content="2015-09-24">
              2015-09-24
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT随笔/" itemprop="url" rel="index">
                    <span itemprop="name">IT随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="命令历史"><a href="#命令历史" class="headerlink" title="命令历史"></a>命令历史</h1><pre><code>以:和/开头的命令都有历史纪录，可以首先键入:或/然后按上下箭头来选择某个历史命令。</code></pre><h1 id="启动vim"><a href="#启动vim" class="headerlink" title="启动vim"></a>启动vim</h1><p>在命令行窗口中输入以下命令即可</p>
<pre><code>vim 直接启动vim

vim filename 打开vim并创建名为filename的文件</code></pre><h1 id="文件命令"><a href="#文件命令" class="headerlink" title="文件命令"></a>文件命令</h1><p>打开单个文件</p>
<pre><code>vim file</code></pre><p>同时打开多个文件</p>
<pre><code>vim file1 file2 file3 ...</code></pre><p>在vim窗口中打开一个新文件</p>
<pre><code>:open file</code></pre><p>在新窗口中打开文件</p>
<pre><code>:split file</code></pre><p>切换到下一个文件</p>
<pre><code>:bn</code></pre><p>切换到上一个文件</p>
<pre><code>:bp</code></pre><p>查看当前打开的文件列表，当前正在编辑的文件会用[]括起来。</p>
<pre><code>:args</code></pre><p>打开远程文件，比如ftp或者share folder</p>
<pre><code>:e ftp://192.168.10.76/abc.txt
:e \\qadrive\test\1.txt</code></pre><h1 id="Vim的模式"><a href="#Vim的模式" class="headerlink" title="Vim的模式"></a>Vim的模式</h1><ul>
<li>正常模式（按Esc或Ctrl+[进入） 左下角显示文件名或为空</li>
<li>插入模式（按i键进入） 左下角显示–INSERT–</li>
<li>可视模式（不知道如何进入） 左下角显示–VISUAL–</li>
</ul>
<h1 id="导航命令"><a href="#导航命令" class="headerlink" title="导航命令"></a>导航命令</h1><pre><code>% 括号匹配</code></pre><h1 id="插入命令"><a href="#插入命令" class="headerlink" title="插入命令"></a>插入命令</h1><pre><code>i 在当前位置生前插入

I 在当前行首插入

a 在当前位置后插入

A 在当前行尾插入

o 在当前行之后插入一行

O 在当前行之前插入一行</code></pre><h1 id="查找命令"><a href="#查找命令" class="headerlink" title="查找命令"></a>查找命令</h1><pre><code>/text　　查找text，按n健查找下一个，按N健查找前一个。

?text　　查找text，反向查找，按n健查找下一个，按N健查找前一个。

vim中有一些特殊字符在查找时需要转义　　.*[]^%/?~$

:set ignorecase　　忽略大小写的查找

:set noignorecase　　不忽略大小写的查找

查找很长的词，如果一个词很长，键入麻烦，可以将光标移动到该词上，按*或#键即可以该单词进行搜索，相当于/搜索。而#命令相当于?搜索。

:set hlsearch　　高亮搜索结果，所有结果都高亮显示，而不是只显示一个匹配。

:set nohlsearch　　关闭高亮搜索显示

:nohlsearch　　关闭当前的高亮显示，如果再次搜索或者按下n或N键，则会再次高亮。

:set incsearch　　逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成。

:set wrapscan　　重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启。</code></pre><h1 id="替换命令"><a href="#替换命令" class="headerlink" title="替换命令"></a>替换命令</h1><pre><code>ra 将当前字符替换为a，当期字符即光标所在字符。

s/old/new/ 用old替换new，替换当前行的第一个匹配

s/old/new/g 用old替换new，替换当前行的所有匹配

%s/old/new/ 用old替换new，替换所有行的第一个匹配

%s/old/new/g 用old替换new，替换整个文件的所有匹配

:10,20 s/^/    /g 在第10行知第20行每行前面加四个空格，用于缩进。

ddp 交换光标所在行和其下紧邻的一行。</code></pre><h1 id="移动命令"><a href="#移动命令" class="headerlink" title="移动命令"></a>移动命令</h1><pre><code>h 左移一个字符
l 右移一个字符，这个命令很少用，一般用w代替。
k 上移一个字符
j 下移一个字符</code></pre><p>以上四个命令可以配合数字使用，比如20j就是向下移动20行，5h就是向左移动5个字符，在Vim中，很多命令都可以配合数字使用，比如删除10个字符10x，在当前位置后插入3个！，3a！<esc>，这里的Esc是必须的，否则命令不生效。</esc></p>
<pre><code>w 向前移动一个单词（光标停在单词首部），如果已到行尾，则转至下一行行首。此命令快，可以代替l命令。

b 向后移动一个单词 2b 向后移动2个单词

e，同w，只不过是光标停在单词尾部

ge，同b，光标停在单词尾部。

^ 移动到本行第一个非空白字符上。

0（数字0）移动到本行第一个字符上，

&lt;HOME&gt; 移动到本行第一个字符。同0健。

$ 移动到行尾 3$ 移动到下面3行的行尾

gg 移动到文件头。 = [[

G（shift + g） 移动到文件尾。 = ]]

f（find）命令也可以用于移动，fx将找到光标后第一个为x的字符，3fd将找到第三个为d的字符。

F 同f，反向查找。

跳到指定行，冒号+行号，回车，比如跳到240行就是 :240回车。另一个方法是行号+G，比如230G跳到230行。

Ctrl + e 向下滚动一行

Ctrl + y 向上滚动一行

Ctrl + d 向下滚动半屏

Ctrl + u 向上滚动半屏

Ctrl + f 向下滚动一屏

Ctrl + b 向上滚动一屏</code></pre><h1 id="撤销和重做"><a href="#撤销和重做" class="headerlink" title="撤销和重做"></a>撤销和重做</h1><pre><code>u 撤销（Undo）
U 撤销对整行的操作
Ctrl + r 重做（Redo），即撤销的撤销。</code></pre><h1 id="删除命令"><a href="#删除命令" class="headerlink" title="删除命令"></a>删除命令</h1><pre><code>x 删除当前字符

3x 删除当前光标开始向后三个字符

X 删除当前字符的前一个字符。X=dh

dl 删除当前字符， dl=x

dh 删除前一个字符

dd 删除当前行

dj 删除上一行

dk 删除下一行

10d 删除当前行开始的10行。

D 删除当前字符至行尾。D=d$

d$ 删除当前字符之后的所有字符（本行）

kdgg 删除当前行之前所有行（不包括当前行）

jdG（jd shift + g）   删除当前行之后所有行（不包括当前行）

:1,10d 删除1-10行

:11,$d 删除11行及以后所有的行

:1,$d 删除所有行

J(shift + j)　　删除两行之间的空行，实际上是合并两行。

拷贝和粘贴

yy 拷贝当前行

nyy 拷贝当前后开始的n行，比如2yy拷贝当前行及其下一行。

p  在当前光标后粘贴,如果之前使用了yy命令来复制一行，那么就在当前行的下一行粘贴。

shift+p 在当前行前粘贴

:1,10 co 20 将1-10行插入到第20行之后。

:1,$ co $ 将整个文件复制一份并添加到文件尾部。

正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按y即可复制

ddp交换当前行和其下一行

xp交换当前字符和其后一个字符</code></pre><h1 id="剪切命令"><a href="#剪切命令" class="headerlink" title="剪切命令"></a>剪切命令</h1><pre><code>正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按d即可剪切

ndd 剪切当前行之后的n行。利用p命令可以对剪切的内容进行粘贴

:1,10d 将1-10行剪切。利用p命令可将剪切后的内容进行粘贴。

:1, 10 m 20 将第1-10行移动到第20行之后。</code></pre><h1 id="退出命令"><a href="#退出命令" class="headerlink" title="退出命令"></a>退出命令</h1><pre><code>:wq 保存并退出

ZZ 保存并退出

:q! 强制退出并忽略所有更改

:e! 放弃所有修改，并打开原来文件。</code></pre><h1 id="窗口命令"><a href="#窗口命令" class="headerlink" title="窗口命令"></a>窗口命令</h1><pre><code>:split或new 打开一个新窗口，光标停在顶层的窗口上

:split file或:new file 用新窗口打开文件

split打开的窗口都是横向的，使用vsplit可以纵向打开窗口。

Ctrl+ww 移动到下一个窗口

Ctrl+wj 移动到下方的窗口

Ctrl+wk 移动到上方的窗口</code></pre><h1 id="关闭窗口"><a href="#关闭窗口" class="headerlink" title="关闭窗口"></a>关闭窗口</h1><pre><code>:close 最后一个窗口不能使用此命令，可以防止意外退出vim。

:q 如果是最后一个被关闭的窗口，那么将退出vim。

ZZ 保存并退出。

关闭所有窗口，只保留当前窗口

:only</code></pre><h1 id="录制宏"><a href="#录制宏" class="headerlink" title="录制宏"></a>录制宏</h1><pre><code>按q键加任意字母开始录制，再按q键结束录制（这意味着vim中的宏不可嵌套），使用的时候@加宏名，比如qa。。。q录制名为a的宏，@a使用这个宏。

执行shell命令

:!command

:!ls 列出当前目录下文件

:!perl -c script.pl 检查perl脚本语法，可以不用退出vim，非常方便。

:!perl script.pl 执行perl脚本，可以不用退出vim，非常方便。

:suspend或Ctrl - Z 挂起vim，回到shell，按fg可以返回vim。</code></pre><h1 id="注释命令"><a href="#注释命令" class="headerlink" title="注释命令"></a>注释命令</h1><pre><code>perl程序中#开始的行为注释，所以要注释某些行，只需在行首加入#

3,5 s/^/#/g 注释第3-5行

3,5 s/^#//g 解除3-5行的注释

1,$ s/^/#/g 注释整个文档。

:%s/^/#/g 注释整个文档，此法更快。</code></pre><h1 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h1><pre><code>:help or F1 显示整个帮助
:help xxx 显示xxx的帮助，比如 :help i, :help CTRL-[（即Ctrl+[的帮助）。
:help &apos;number&apos; Vim选项的帮助用单引号括起
:help &lt;Esc&gt; 特殊键的帮助用&lt;&gt;扩起
:help -t Vim启动参数的帮助用-
：help i_&lt;Esc&gt; 插入模式下Esc的帮助，某个模式下的帮助用模式_主题的模式
帮助文件中位于||之间的内容是超链接，可以用Ctrl+]进入链接，Ctrl+o（Ctrl + t）返回</code></pre><h1 id="其他非编辑命令"><a href="#其他非编辑命令" class="headerlink" title="其他非编辑命令"></a>其他非编辑命令</h1><pre><code>. 重复前一次命令

:set ruler?　　查看是否设置了ruler，在.vimrc中，使用set命令设制的选项都可以通过这个命令查看

:scriptnames　　查看vim脚本文件的位置，比如.vimrc文件，语法文件及plugin等。

:set list 显示非打印字符，如tab，空格，行尾等。如果tab无法显示，请确定用set lcs=tab:&gt;-命令设置了.vimrc文件，并确保你的文件中的确有tab，如果开启了expendtab，那么tab将被扩展为空格。

Vim教程
在Unix系统上
$ vimtutor
在Windows系统上
:help tutor

:syntax 列出已经定义的语法项
:syntax clear 清除已定义的语法规则
:syntax case match 大小写敏感，int和Int将视为不同的语法元素
:syntax case ignore 大小写无关，int和Int将视为相同的语法元素，并使用同样的配色方案</code></pre><hr>
<p> 本文转自<a href="http://www.cnblogs.com/softwaretesting/archive/2011/07/12/2104435.html" target="_blank" rel="noopener">WWDC 2015: AUTO LAYOUT IMPROVEMENTS</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/23/WWDC-2015-AUTO-LAYOUT在iOS-9上的改进/" itemprop="url">
                  WWDC 2015: AUTO LAYOUT在iOS 9上的改进
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-23T16:44:55+08:00" content="2015-09-23">
              2015-09-23
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT随笔/" itemprop="url" rel="index">
                    <span itemprop="name">IT随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>自从AUTO LAYOUT在iOS 6中引入以来,我一直深深的为之着迷，特别是通过直接在代码中使用它,而不是使用故事板。但它在代码中使用非常冗长。我写了一些类,使代码更加紧凑。但我不满意我的解决方案。所以我计划在WWDC期间去一个实验室,咨询一个苹果AUTO LAYOUT工程师对这个问题的看法。但是事实证明我不需要!苹果解决了大部分我在AUTO LAYOUT中遇到的问题在iOS 9的API中!在这篇文章中我想突出的新API更容易使用自动布局在代码和故事板! 在这片文章中，我将分别用代码和Storyboard展示用新的API使用AUTO LAYOUT是如何简单易用。</p>
<h2 id="什么是AUTO-LAYOUT"><a href="#什么是AUTO-LAYOUT" class="headerlink" title="什么是AUTO LAYOUT"></a>什么是AUTO LAYOUT</h2><p>对于那些AUTO LAYOUT的新手，我想快速的过一下这东西到底是什么。AUTO LAYOUT是一个机制,用它可以很容易地支持不同的屏幕尺寸。<br>AUTO LAYOUT的核心是极其简单的。它使用“约束”来确定视图在屏幕上的x,y,宽度和高度属性。约束是描述一个视图的位置和大小的规则。一个视图需要多个约束来正确的定位和限制大小。约束和所代表它的类youtConstraint仅仅是遵循这个公式:</p>
<pre><code>view1.attribute1 = view2.attribute2 x A + B</code></pre><p>这是AUTO LAYOUT的核心,所有的约束都遵循这种模式。使用一系列遵循这种模式的约束你可以布局一切，它将在巧妙的缩放来适应不同的屏幕尺寸。<br>例如:</p>
<pre><code>label.Top = container.Top x 1 + 20(列出了一个标签的y值低于容器的顶部边缘视图20像素点)
label.Width = container.Width x 0.5 + 0 (一个标签的宽度设置为一半的容器的宽度)</code></pre><h2 id="为什么使用AUTO-LAYOUT？"><a href="#为什么使用AUTO-LAYOUT？" class="headerlink" title="为什么使用AUTO LAYOUT？"></a>为什么使用AUTO LAYOUT？</h2><p>在很长的一段时间内,iOS应用程序并没有在关心屏幕大小适配。iPhone 3g,4和4s基本上都是分辨率为320×480的逻辑点。随着视网膜屏幕的引入并没有改变,因为作为一名开发人员你仍然可以假装屏幕是320×480,而系统会为你转换为640×960。当然你也有iPad,但你不必为之做更多的工作,因为你将为iPad设计一个特定的用户界面,这将是特定的屏幕分辨率1024×768。</p>
<h2 id="支持不同的分辨率"><a href="#支持不同的分辨率" class="headerlink" title="支持不同的分辨率"></a>支持不同的分辨率</h2><p>随着iPhone 4s到来的iOS 6.0,给我们介绍了自动布局。我们不觉得有必要使用它,但在它的目的很明显:使它容易支持iPhone更大的屏幕!在那一刻唯一的真正好处来自屏幕的旋转，从竖屏到横屏,这实际上也是一个分辨率的变化。</p>
<h2 id="iPad的多任务模式"><a href="#iPad的多任务模式" class="headerlink" title="iPad的多任务模式"></a>iPad的多任务模式</h2><p>随着iOS 9的到来，AUTO LAYOUT变得如此重要的一个原因是：在iPad上支持多任务！现在你可以观看并排的两个应用程序在同一时间，这意味着应用程序要能够缩放自己的尺寸为四分之一屏幕或者半个屏幕。用户决定显示每个应用程序的大小。使用AUTO LAYOUT可以很容易适应这些变化。</p>
<h2 id="STACKING-VIEWS"><a href="#STACKING-VIEWS" class="headerlink" title="STACKING VIEWS"></a>STACKING VIEWS</h2><p>Before iOS 9, we had to add many different constraints to all different views within a single screen to position them correctly and let them handle screen size changes accordingly. This was easy, but a little hard to manage. There were two ways to do it:</p>
<p>在iOS 9之前，我们不得不在一个屏幕上对所有子视图添加许多不同的约束来使它们适应屏幕大小的变化。这是一件简单的事情，但是难于管理。有两种方式可以实现：</p>
<ul>
<li>使用 storyboard</li>
<li>使用代码</li>
</ul>
<h3 id="Storyboard"><a href="#Storyboard" class="headerlink" title="Storyboard"></a>Storyboard</h3><p><img src="http://blog.trifork.com/wp-content/uploads/2015/06/Safari-developer.apple_.com-Screen-Shot-21-June-2015-at-1626.png" alt="storyboard"></p>
<p>使用故事板可以单击并拖动来创建约束，你最终将得到的大量的蓝线,这代表了约束。现在你想要插入另一个标签,在“车库乐队”和“苹果”之间。你该怎么做?你删除一些约束连接现有的标签,插入你的新标签和你现有的两个标签连接到你的新标签。这足以说明约束维护的复杂性。</p>
<h3 id="用代码实现约束"><a href="#用代码实现约束" class="headerlink" title="用代码实现约束"></a>用代码实现约束</h3><p>用代码实现的话也存在同样的问题，这里没有蓝线，取而代之的是：</p>
<pre><code>view.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat(
&quot;V:|[titleLabel]-padding-[descriptionLabel]-padding-[imageView]&quot;, 
options: nil,
 metrics: [&quot;padding&quot;: 10],
  views: [
          &quot;titleLabel&quot;: titleLabel,
          &quot;descriptionLabel&quot;: descriptionLabel,
          &quot;imageView&quot;: imageView])
)
view.addConstraint(NSLayoutConstraint(
   item: titleLabel,
   attribute: .Leading,
   relatedBy: .Equal,
   toItem: self,
   attribute: .Leading,
   multiplier: 1,
   constant: 10)
)</code></pre><p>这仍然不是最佳的管理方案。</p>
<h3 id="UIStackView"><a href="#UIStackView" class="headerlink" title="UIStackView"></a>UIStackView</h3><p>随着iOS 9的一声炮响，UIStackView应运而生！你可以把一组子视图放入UIStackView，并将它们垂直或水平布局，这不费吹灰之力。不再需要为每个子视图添加约束。这一切UIStackView都已经为你做好。</p>
<p>在上边儿的例子中你只需要标示那里需要使用stack view。你只需找出子视图需要堆积的位置。几乎所有你能想到的UI都可以都可以通过嵌套stack views的方式建立视图。苹果强烈建议我们为每一个布局使用stack views，只有那些用stack views实在无法实现的才需要用单独的约束。</p>
<p>使用stack view的示例：</p>
<pre><code>let stackView = UIStackView(arrangedSubviews: [titleLabel, descriptionLabel, imageView])
stackView.distribution = .Fill
stackView.alignment = .Leading
stackView.axis = .Vertical
stackView.spacing = 10</code></pre><p>就是这样!在titleLabel和descriptionLabel之间添加一个label就像将其添加到数组的“arrangedSubviews”一样简单!<br>一个额外的好处:你可以很容易地通过动画动画隐藏/显示视图通过修改UIView的隐藏属性,而该属性通常不能做成动画。</p>
<p><img src="https://raw.githubusercontent.com/tomvanzummeren/TZStackView/master/assets/TZStackView-hide-animation.gif" alt="stackview"></p>
<p>所有需要的是修改动画的隐藏属性,如下:</p>
<pre><code>UIView.animateWithDuration(0.5, animations: {
   someSubview.hidden = true
})</code></pre><h3 id="我自己实现的UIStackView"><a href="#我自己实现的UIStackView" class="headerlink" title="我自己实现的UIStackView"></a>我自己实现的UIStackView</h3><p>多么完美的UIStackView，但是它只能用在iOS 9及以上版本。但是我想用在iOS 7和iOS 8之中。UIStackView的接口看起来足够简单：用一个视图数组初始化它，配置它的一些属性如‘distribution’, ‘alignment’ 和 ‘axis’。这就是它！我想，这有多难？然而事实证明它比我想象的要难得多，但是我做到了！我完全重写了整个过程咋iOS 7和iOS 8之下。我为之自豪：TZStackView！<br><a href="https://github.com/tomvanzummeren/TZStackView" target="_blank" rel="noopener">TZStackView git地址</a></p>
<p>我将它设计为和UIStackView一模一样的接口，以便于将来某一天被替代。使用TZStackView的实现上面的例子：</p>
<pre><code>let stackView = TZStackView(arrangedSubviews: [titleLabel, descriptionLabel, imageView])
stackView.distribution = .Fill
stackView.alignment = .Leading
stackView.axis = .Vertical
stackView.spacing = 10</code></pre><h2 id="LAYOUT-GUIDES"><a href="#LAYOUT-GUIDES" class="headerlink" title="LAYOUT GUIDES"></a>LAYOUT GUIDES</h2><p>另一个新的iOS 9Auto Layout的概念是“layout guide”。是“constrain negative space”。什么意思?看个例子:<br>你有三个固定宽度的视图用来填补可用空间,你想让这些矩形之间的间距相等。</p>
<p><img src="http://blog.trifork.com/wp-content/uploads/2015/06/spacing-example.png" alt="layout guides"></p>
<p>The empty space in between the boxes is called ‘negative space’ and you want to express using constraints that you want those spaces to be equal to one another. Long story short: you can’t express that directly because constraints can only be applied on views, not on margins between those views. Before iOS 9 what you could do is add 4 transparent subviews in between those boxes, also known as ‘spacer views’ and put constraints on those. That works like a charm!</p>
<p>The problem with this approach is that it’s kind of a hack. You pollute your view hierarchy with things that are just there to position other views with no purpose of their own. This also impacts performance.</p>
<p>This brings me to layout guides, represented by the UILayoutGuide class. You can add them to your view like this:</p>
<p>视图之间的空的空间被称为“negative space”，你的目的是使用约束来使这些空间相等。长话短说:你不能直接表达,因为约束只能应用于视图,而不是那些视图之间的间距。在iOS 9之前你可以做的是添加4个透明子视图在这些视图之间,这些也被称为“间隔视图”，然后给这些视图添加约束。<br>这种方法的问题在于它是一种黑客技术。这污染了你的视图层次，它们仅仅是为了固定其他视图而没有自己的意义。这也影响了性能。<br>为此，引入了“layout guide”,由UILayoutGuide类来实现。你可以将它们添加到你的视图，像这样：</p>
<pre><code>let layoutGuide = UILayoutGuide()
view.addLayoutGuide(layoutGuide)</code></pre><p>Next, you can use the layout guide in your constraints, just as you would do using ‘spacer views’.</p>
<p>接下来，你可以在你的约束中使用layout guide，就像使用‘spacer views’。</p>
<pre><code>view.addConstraint(NSLayoutConstraint(
         item: layoutGuide1,
    attribute: .Width,
    relatedBy: .Equal,
       toItem: layoutGuide2,
    attribute: .Width,
   multiplier: 1,
     constant: 0)
 )</code></pre><p>这样做的好处是,我们不污染我们的视图层次和替换‘spacer views’用更轻量级的‘layout guides’。它们不能回应触摸或直观地呈现在屏幕上。它们只是在那里给其他视图提供约束。</p>
<h2 id="CONSTRAINTS-FLUENT-INTERFACE"><a href="#CONSTRAINTS-FLUENT-INTERFACE" class="headerlink" title="CONSTRAINTS FLUENT INTERFACE"></a>CONSTRAINTS FLUENT INTERFACE</h2><p>这也是一个功能在不久的将来会普遍使用的功能。它在WWDC的两节演讲中被提到。它简化了你创建单独约束的过程。在此重复我之前给出的一个例子:</p>
<pre><code>view.addConstraint(NSLayoutConstraint(
      item: titleLabel,
 attribute: .Leading,
 relatedBy: .Equal,
    toItem: self,
 attribute: .Leading,
multiplier: 1,
  constant: 10)
)</code></pre><p>现在你可以用下边儿的代码来达到同样的效果：</p>
<pre><code>view.leadingAnchor.constraintEqualToAnchor(titleLabel.leadingAnchor, constant: 10)    </code></pre><p>当我第一次看到这种新的写约束的方式时我非常激动。易读、易记忆更易于管理。这和UIStackView配合使用将大大简化编写自动布局代码的数量。</p>
<h2 id="RIGHT-TO-LEFT-LANGUAGE-SUPPORT"><a href="#RIGHT-TO-LEFT-LANGUAGE-SUPPORT" class="headerlink" title="RIGHT-TO-LEFT LANGUAGE SUPPORT"></a>RIGHT-TO-LEFT LANGUAGE SUPPORT</h2><p>从右到左的语言支持已经在这儿了！我不知道这是否令人着迷,但显然使用从右到左的语言,例如阿拉伯语的人更期望用户界面右对齐。</p>
<p><img src="http://blog.trifork.com/wp-content/uploads/2015/06/Safari-developer.apple_.com-Screen-Shot-21-June-2015-at-2102-169x300.png" alt="RIGHT-TO-LEFT"></p>
<p>它的实现是很简单的。他们仅仅使用了“Leading”和“Trailing”的布局属性抽象“Left”和“Right”。在iOS 9之前“Leading”和“Trailing”的布局属性已经存在,但他们相当于“Left”和“Right”。事实上,苹果公司推荐使用“Leading”和“Trailing”来替代“Left”和“Right”。这样你的应用程序支持从右到左的语言只是分分钟的事情！</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Auto Layout在iOS 9上做了很多该进，总结下:</p>
<ul>
<li>stack view</li>
<li>layout guides</li>
<li>layout anchors (fluent interface)</li>
<li>right-to-left language support</li>
</ul>
<p>推荐观看<a href="https://developer.apple.com/videos/wwdc/2015/?id=218" target="_blank" rel="noopener">Mysteries of Auto Layout – part 1</a>. 来学习怎样调试Auto Layout问题, 观看<a href="https://developer.apple.com/videos/wwdc/2015/?id=219" target="_blank" rel="noopener">Mysteries of Auto Layout – part 2</a>来了解更多细节. 想了解right-to-left language support, 阅读<a href="https://developer.apple.com/videos/wwdc/2015/?id=222" target="_blank" rel="noopener">New UIKit Support for International User Interfaces</a>.</p>
<hr>
<p>本文翻译自<a href="http://blog.trifork.com/2015/06/22/wwdc-2015-auto-layout-improvements/" target="_blank" rel="noopener">WWDC 2015: AUTO LAYOUT IMPROVEMENTS</a>，转载请注明出处。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/16/CocoaPods安装和使用/" itemprop="url">
                  CocoaPods安装和使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-16T13:34:37+08:00" content="2015-09-16">
              2015-09-16
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CocoaPods是什么？"><a href="#CocoaPods是什么？" class="headerlink" title="CocoaPods是什么？"></a>CocoaPods是什么？</h1><p>当你开发iOS应用时，会经常使用到很多第三方开源类库，比如JSONKit，AFNetWorking等等。可能某个类库又用到其他类库，所以要使用它，必须得另外下载其他类库，而其他类库又用到其他类库。总之，手动一个个去下载所需类库十分麻烦。另外一种常见情况是，你项目中用到的类库有更新，你必须得重新下载新版本，重新加入到项目中，十分麻烦。这个时候，你需要 CocoaPods。</p>
<p>CocoaPods应该是iOS最常用最有名的类库管理工具了，上述两个烦人的问题，通过cocoaPods，只需要一行命令就可以完全解决，当然前提是你必须正确设置它。重要的是，绝大部分有名的开源类库，都支持CocoaPods。所以，作为iOS程序员的我们，掌握CocoaPods的使用是必不可少的基本技能了。</p>
<h1 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h1><p>在安装CocoaPods之前，首先要在本地安装好Ruby环境。至于如何在Mac中安装好Ruby环境，请google一下，本文不再涉及。</p>
<p>假如你在本地已经安装好Ruby环境，那么下载和安装CocoaPods将十分简单，只需要一行命令。在终端中输入以下命令：</p>
<p>sudo gem install cocoapods<br>但是，且慢。如果你在天朝，在终端中敲入这个命令之后，会发现半天没有任何反应。原因无他，因为那堵墙阻挡了cocoapods.org。</p>
<p>但是，是的，又但是（不过是个可喜的“但是”）。我们可以用淘宝的Ruby镜像来访问cocoapods。按照下面的顺序在终端中敲入依次敲入命令：</p>
<p>$ gem sources –remove <a href="https://rubygems.org/" target="_blank" rel="noopener">https://rubygems.org/</a><br>//等有反应之后再敲入以下命令<br>$ gem sources -a <a href="http://ruby.taobao.org/" target="_blank" rel="noopener">http://ruby.taobao.org/</a><br>为了验证你的Ruby镜像是并且仅是taobao，可以用以下命令查看：</p>
<p>$ gem sources -l<br>只有在终端中出现下面文字才表明你上面的命令是成功的：</p>
<p><strong>* CURRENT SOURCES *</strong></p>
<p><a href="http://ruby.taobao.org/" target="_blank" rel="noopener">http://ruby.taobao.org/</a><br>上面所有的命令完成之时，你再次在终端中运行：</p>
<p>$ sudo gem install cocoapods<br>等上十几秒钟，CocoaPods就可以在你本地下载并且安装好了，不再需要其他设置。</p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>好了，安装好CocoPods之后，接下来就是使用它。所幸，使用CocoPods和安装它一样简单，也是通过一两行命令就可以搞定。</p>
<h1 id="场景1：利用CocoaPods，在项目中导入AFNetworking类库"><a href="#场景1：利用CocoaPods，在项目中导入AFNetworking类库" class="headerlink" title="场景1：利用CocoaPods，在项目中导入AFNetworking类库"></a>场景1：利用CocoaPods，在项目中导入AFNetworking类库</h1><p>AFNetworking类库在GitHub地址是：<a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="noopener">https://github.com/AFNetworking/AFNetworking</a></p>
<p>为了确定AFNetworking是否支持CocoaPods，可以用CocoaPods的搜索功能验证一下。在终端中输入：</p>
<pre><code>$ pod search AFNetworking</code></pre><p>过几秒钟之后，你会在终端中看到关于AFNetworking类库的一些信息。</p>
<p>这说明，AFNetworking是支持CocoaPods，所以我们可以利用CocoaPods将AFNetworking导入你的项目中。</p>
<p>首先，我们需要在我们的项目中加入CocoaPods的支持。先利用Xcode创建一个名字CocoaPodsDemo的项目，用于以下的教程。</p>
<p>你看到这里也许会问，CocoaPods为什么能下载AFNetworking呢，而不是下载其他类库呢？这个问题的答案是，有个文件来控制CocoaPods该下载什么。这个文件就叫做“Podfile”（注意，一定得是这个文件名，而且没有后缀）。你创建一个Podfile文件，然后在里面添加你需要下载的类库，也就是告诉CocoaPods，“某某和某某和某某某，快到碗里来！”。每个项目只需要一个Podfile文件。</p>
<p>好吧，废话少说，我们先创建这个神奇的PodFile。在终端中进入（cd命令）你项目所在目录，然后在当前目录下，利用vim创建Podfile，运行：</p>
<pre><code>$ vim Podfile</code></pre><p>然后在Podfile文件中输入以下文字：</p>
<pre><code>platform :ios, &apos;7.0&apos;
pod &quot;AFNetworking&quot;, &quot;~&gt; 2.0&quot;</code></pre><p>注意，这段文字不是凭空生成的，可以在AFNetworking的github页面找到。这两句文字的意思是，当前AFNetworking支持的iOS最高版本是iOS 7.0, 要下载的AFNetworking版本是2.0。</p>
<p>然后保存退出。vim环境下，保存退出命令是：</p>
<p>:wq<br>这时候，你会发现你的项目目录中，出现一个名字为Podfile的文件，而且文件内容就是你刚刚输入的内容。注意，Podfile文件应该和你的工程文件.xcodeproj在同一个目录下。</p>
<p>这时候，你就可以利用CocoPods下载AFNetworking类库了。还是在终端中的当前项目目录下，运行以下命令：</p>
<p>$ pod install<br>因为是在你的项目中导入AFNetworking，这就是为什么这个命令需要你进入你的项目所在目录中运行。</p>
<p>运行上述命令之后，终端出现以下信息：</p>
<pre><code>EricmatoMacBook-Pro:CocoaPodsDemo ericwang$ pod install
Analyzing dependencies
Downloading dependencies
Installing AFNetworking (2.0.2)
Generating Pods project
Integrating client project

[!] From now on use `CocoaPodsDemo.xcworkspace`.</code></pre><p>注意最后一句话，意思是：以后打开项目就用 CocoaPodsDemo.xcworkspace 打开，而不是之前的.xcodeproj文件。</p>
<p>你也许会郁闷，为什么会出现.xcodeproj文件呢。这正是你刚刚运行$ pod install命令产生的新文件。除了这个文件，你会发现还多了另外一个文件“Podfile.lock”和一个文件夹“Pods”。 点击 CocoaPodsDemo.xcworkspace 打开之后工程之后，你会惊喜地发现，AFNetwoking已经成功导入项目了。<br>现在，你就可以开始使用AFNetworking.h啦。可以稍微测试一下，在你的项目任意代码文件中输入：</p>
<pre><code>#import &quot;AFNetworking.h&quot;</code></pre><p>然后编译，看看是否出错。</p>
<p>至此，CocoPods的第一个应用场景讲述完毕。过程总结一下就是：</p>
<p>先在项目中创建Podfile，Podfile的内容是你想导入的类库。一般类库的原作者会告诉你导入该类库应该如何写Podfile；<br>运行命令：`$ pod install.</p>
<h2 id="场景2：如何正确编译运行一个包含CocoPods类库的项目"><a href="#场景2：如何正确编译运行一个包含CocoPods类库的项目" class="headerlink" title="场景2：如何正确编译运行一个包含CocoPods类库的项目"></a>场景2：如何正确编译运行一个包含CocoPods类库的项目</h2><p>你也许曾经遇到过（特别是新手iOS开发者）这种情况，好不容易在GitHub上找到一份代码符合自己想需求，兴冲冲下载下来，一编译，傻眼了，发现有各种各样错误。一看，原来是缺失了各种其他第三方类库。这时候莫慌，你再仔细一看，会发现你下载的代码包含了Podfile。没错，这意味着你可以用CocoaPods很方便下载所需要的类库。</p>
<p>下面，以代码 UAAppReviewManager 为例来说明如何正确编译运行一个包含CocoPods类库的项目。</p>
<p>UAAppReviewManager是一个能够让你方便地将提醒用户评分的功能加入你的应用中。当你去UAAppReviewManager的GitHub地址下载这份代码之后，打开Example工程（UAAppReviewManagerExample），编译，你会发现Xcode报告一大堆错误，基本都是说你编译的这份代码找不到某某头文件，这就意味着你要成功编译UAAppReviewManager的Example代码，必须先导入一些第三方类库。同时你会发现在UAAppReviewManagerExample文件夹下面有三个跟CocosPods相关的文件（文件夹）：Podfile，Podfile.lock和Pods，这时候，打开终端，进入UAAppReviewManagerExample所在的目录，也就是和Podfile在同一目录下，和场景1一样，输入以下命令（由于已经有Podfile，所以不需要再创建Podfile）：</p>
<pre><code>$ pod update</code></pre><p>过几秒（也许需要十几秒，取决于你的网络状况）之后，终端出现：</p>
<pre><code>Analyzing dependencies
Fetching podspec for `UAAppReviewManager` from `../`
Downloading dependencies
Installing UAAppReviewManager (0.1.6)
Generating Pods project
Integrating client project

[!] From now on use `UAAppReviewManagerExample.xcworkspace`.</code></pre><p>这时候，再回到UAAppReviewManagerExample文件夹看一看，会看到多了一个文件UAAppReviewManagerExample.xcworkspace：</p>
<p>根据终端的信息提示，你以后就需用新产生的UAAppReviewManagerExample.xcworkspace来运行这个Example代码了。</p>
<p>打开UAAppReviewManagerExample.xcworkspace，编译运行，成功！</p>
<p>注意，这里有个小问题，如果刚刚你不是输入$ pod update，而是输入$ pod install，会发现类库导入不成功，并且终端出现下面提示：</p>
<pre><code>[!] Required version (UAAppReviewManager (from `../`)) not found for `UAAppReviewManager`.
Available versions: 0.1.6</code></pre><p>这里的意思大概是Podfile文件过期，类库有升级，但是Podfile没有更改。$ pod install只会按照Podfile的要求来请求类库，如果类库版本号有变化，那么将获取失败。但是 $ pod update会更新所有的类库，获取最新版本的类库。而且你会发现，如果用了 $ pod update，再用 $ pod install 就成功了。</p>
<p>那你也许会问，什么时候用 $ pod install，什么时候用 $ pod update 呢，我又不知道类库有没有新版本。好吧，那你每次直接用 $ pod update 算了。或者先用 $ pod install，如果不行，再用 $ pod update。</p>
<h2 id="场景3：使用CocoaPods开发并打包静态库"><a href="#场景3：使用CocoaPods开发并打包静态库" class="headerlink" title="场景3：使用CocoaPods开发并打包静态库"></a>场景3：使用CocoaPods开发并打包静态库</h2><p>通常我们用pod来管理第三方开源类库，但我们也极有可能会开发一个用pod管理依赖关系的静态类库给其他人使用，而又不愿意公开源代码，比如一些SDK，那么就需要打包成.a文件。本文将以一个依赖于ASIHTTPRequest的静态类库，来演示如何创建使用了CocoaPods的静态类库以及打包的过程。</p>
<h3 id="开发静态库（Static-Library）"><a href="#开发静态库（Static-Library）" class="headerlink" title="开发静态库（Static Library）"></a>开发静态库（Static Library）</h3><p>创建静态库，有2种方法。</p>
<h4 id="手动创建-deprecated"><a href="#手动创建-deprecated" class="headerlink" title="手动创建(deprecated)"></a>手动创建(deprecated)</h4><p>过程比较繁琐，纯体力活不推荐，大体步骤说下</p>
<ol>
<li>在Xcode中创建一个Cocoa Touch Static Library；</li>
<li>创建Podfile文件；</li>
<li>执行pod install完成整个项目的搭建；<br>如果需要demo，手动创建示例程序，使用pod添加对私有静态库的依赖，重复执行pod install完成示例项目的搭建。</li>
</ol>
<h4 id="基于pod自动创建"><a href="#基于pod自动创建" class="headerlink" title="基于pod自动创建"></a>基于pod自动创建</h4><p>只需要输入pod的lib命令即可完成初始项目的搭建，下面详细说明具体步骤，以WaterDropView作为项目名演示。</p>
<h5 id="1-执行命令pod-lib-create-WaterDropView。在此期间需要确认下面4个问题。"><a href="#1-执行命令pod-lib-create-WaterDropView。在此期间需要确认下面4个问题。" class="headerlink" title="1.执行命令pod lib create WaterDropView。在此期间需要确认下面4个问题。"></a>1.执行命令pod lib create WaterDropView。在此期间需要确认下面4个问题。</h5><pre><code>What language do you want to use?? [ ObjC / Swift ]
&gt; Objc

Would you like to include a demo application with your library? [ Yes / No ]
&gt; Yes

Which testing frameworks will you use? [ Specta / Kiwi / None ]
&gt; None

Would you like to do view based testing? [ Yes / No ]
&gt; No 

What is your class prefix?
&gt; ZM

Running pod install on your new library.

Analyzing dependencies

CocoaPods 0.39.0.beta.4 is available.
To update use: `gem install cocoapods --pre`
[!] This is a test version we&apos;d love you to try.

For more information see http://blog.cocoapods.org
and the CHANGELOG for this version http://git.io/BaH8pQ.

Fetching podspec for `WaterDropView` from `../`
Downloading dependencies
Installing WaterDropView (0.1.0)
Generating Pods project
Integrating client project

[!] Please close any current Xcode sessions and use `WaterDropView.xcworkspace` for this project from now on.

Ace! you&apos;re ready to go!
We will start you off by opening your project in Xcode
open &apos;WaterDropView/Example/WaterDropView.xcworkspace&apos;

To learn more about the template see `https://github.com/CocoaPods/pod-template.git`.
To learn more about creating a new pod, see `http://guides.cocoapods.org/making/making-a-cocoapod`.</code></pre><p>   第一个问题询问是否提供一个demo项目，通常选择Yes，其他的可以根据需要选择。命令执行完后，就会创建好一个通过cocoapods管理依赖关系的基本类库框架。</p>
<h5 id="2-打开WaterDropView-podspec文件，修改类库配置信息，结果像这样。"><a href="#2-打开WaterDropView-podspec文件，修改类库配置信息，结果像这样。" class="headerlink" title="2.打开WaterDropView.podspec文件，修改类库配置信息，结果像这样。"></a>2.打开WaterDropView.podspec文件，修改类库配置信息，结果像这样。</h5><pre><code>#
# Be sure to run `pod lib lint WaterDropView.podspec&apos; to ensure this is a
# valid spec before submitting.
#
# Any lines starting with a # are optional, but their use is encouraged
# To learn more about a Podspec see http://guides.cocoapods.org/syntax/podspec.html
#
Pod::Spec.new do |s|
  s.name             = &quot;WaterDropView&quot;
  s.version          = &quot;0.1.0&quot;
  s.summary          = &quot;A short description of WaterDropView.&quot;

# This description is used to generate tags and improve search results.
#   * Think: What does it do? Why did you write it? What is the focus?
#   * Try to keep it short, snappy and to the point.
#   * Write the description between the DESC delimiters below.
#   * Finally, don&apos;t worry about the indent, CocoaPods strips it!  
  s.description      = &lt;&lt;-DESC
                   DESC

  s.homepage         = &quot;https://github.com/qcc107/WaterDropView&quot;
  # s.screenshots     = &quot;www.example.com/screenshots_1&quot;, &quot;www.example.com/screenshots_2&quot;
  s.license          = &apos;MIT&apos;
  s.author           = { &quot;qcc107&quot; =&gt; &quot;464760435@qq.com&quot; }
  s.source           = { :git =&gt; &quot;https://github.com/qcc107/WaterDropView.git&quot;, :tag =&gt; s.version.to_s }
  # s.social_media_url = &apos;https://twitter.com/&lt;TWITTER_USERNAME&gt;&apos;

  s.platform     = :ios, &apos;7.0&apos;
  s.requires_arc = true

  s.source_files = &apos;Pod/Classes/**/*&apos;
  s.resource_bundles = {
  &apos;WaterDropView&apos; =&gt; [&apos;Pod/Assets/*.png&apos;]
  }

  # s.public_header_files = &apos;Pod/Classes/**/*.h&apos;
  # s.frameworks = &apos;UIKit&apos;, &apos;MapKit&apos;
  # s.dependency &apos;AFNetworking&apos;, &apos;~&gt; 2.3&apos;
end</code></pre><p>按照默认配置，类库的源文件将位于Pod/Classes文件夹下，资源文件位于Pod/Assets文件夹下，可以修改s.source_files和s.resource_bundles来更换存放目录。s.public_header_files用来指定头文件的搜索位置。<br>s.frameworks和s.libraries指定依赖的SDK中的framework和类库，需要注意，依赖项不仅要包含你自己类库的依赖，还要包括所有第三方类库的依赖，只有这样当你的类库打包成.a或.framework时才能让其他项目正常使用。</p>
<h5 id="3-进入Example文件夹，执行pod-install，让demo项目安装依赖项并更新配置。"><a href="#3-进入Example文件夹，执行pod-install，让demo项目安装依赖项并更新配置。" class="headerlink" title="3.进入Example文件夹，执行pod install，让demo项目安装依赖项并更新配置。"></a>3.进入Example文件夹，执行pod install，让demo项目安装依赖项并更新配置。</h5><pre><code>$pod install

Analyzing dependencies

CocoaPods 0.39.0.beta.4 is available.
To update use: `gem install cocoapods --pre`
[!] This is a test version we&apos;d love you to try.

For more information see http://blog.cocoapods.org
and the CHANGELOG for this version http://git.io/BaH8pQ.

Fetching podspec for `WaterDropView` from `../`
Downloading dependencies
Using WaterDropView (0.1.0)
Generating Pods project
Integrating client project</code></pre><h5 id="4-添加代码。"><a href="#4-添加代码。" class="headerlink" title="4.添加代码。"></a>4.添加代码。</h5><p>添加ZMWaterDropView类，注意文件存放的位置在Pod/Classes目录下，跟podspec配置要一致。<br>运行Pod install，让demo程序加载新建的类。也许你已经发现了，只要新增加类/资源文件或依赖的三方库都需要重新运行Pod install来应用更新。<br>编写Example代码。</p>
<h5 id="提交本地代码库"><a href="#提交本地代码库" class="headerlink" title="提交本地代码库"></a>提交本地代码库</h5><p>1.修改s.source。根据你的实际路径修改。</p>
<p>s.source = { :git =&gt; “/Users/name/workspace/ZMWaterDropView”, :tag =&gt; ‘0.1.0’ }<br>2.提交源码，并打tag。</p>
<p>git add .<br>git commit -a -m ‘v0.1.0’<br>git tag -a 0.1.0 -m ‘v0.1.0’<br>验证类库</p>
<p>开发完成静态类库之后，需要运行pod lib lint验证一下类库是否符合pod的要求。可以通过添加–only-errors忽略一些警告。</p>
<p>pod lib lint ZMWaterDropView.podspec –only-errors –verbose<br>…<br>ZMWaterDropView passed validation.<br>打包类库</p>
<p>需要使用一个cocoapods的插件cocoapods-packager来完成类库的打包。当然也可以手动编译打包，但是过程会相当繁琐。</p>
<p>安装打包插件<br>终端执行以下命令</p>
<p>sudo gem install cocoapods-packager<br>打包<br>命令很简单，执行</p>
<p>pod package ZMWaterDropView.podspec –library –force<br>其中–library指定打包成.a文件，如果不带上将会打包成.framework文件。–force是指强制覆盖。需要特别强调的是，该插件通过对引用的三方库进行重命名很好的解决了类库命名冲突的问题。</p>
<hr>
<p>本文参考 <a href="http://code4app.com/article/cocoapods-install-usage" title="code4app" target="_blank" rel="noopener">code4app</a> 和 <a href="http://www.cnblogs.com/brycezhang/archive/2014/11/23/4117180.html" title="Bryce Zhang" target="_blank" rel="noopener">Bryce Zhang</a>。  </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/15/阻碍我们成功的八种行为/" itemprop="url">
                  阻碍我们成功的八种行为
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-15T09:33:46+08:00" content="2015-09-15">
              2015-09-15
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/成长中的感悟/" itemprop="url" rel="index">
                    <span itemprop="name">成长中的感悟</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>你白天黑夜忙个不停，但在事业上却没什么进展。知道吗？可能是你的那些糟糕习惯毁了自己。</code></pre><p>来源：网络</p>
<p> 有时候，我们会是自己最坏的敌人。我们有意或无意中做的事情会阻挠而不是促进我们成功。排除这些具有破坏性的行为的第一步就是认识它们。以下是最糟糕的八种行为：</p>
<h2 id="1-将忙碌与高效混为一谈"><a href="#1-将忙碌与高效混为一谈" class="headerlink" title="1.将忙碌与高效混为一谈"></a>1.将忙碌与高效混为一谈</h2><blockquote>
<p>“不要将行动误当作成就。”——约翰·伍登（John Wooden </p>
</blockquote>
<p>让我们面对这个问题，你能找到足够多的工作让你白天、黑夜和周末都忙个不停。问题是：这些都是应该做的工作吗？</p>
<p>让你成功的并不是你投入了多少小时或者你同时在干几件事，而是专注于有效果的事情。不要把忙碌和取得进展混淆在一起。我们本应评估那些会对我们的目标产生最大影响的行动所取得的进展，而实际上我们却以忙碌程度作为衡量成功的标准。企业文化或许会对“看上去很忙”进行奖励，但企业真正的成功是在追求长期目标的过程中因专注而取得的成果。</p>
<h2 id="2-追求完美"><a href="#2-追求完美" class="headerlink" title="2. 追求完美"></a>2. 追求完美</h2><blockquote>
<p>“如果你追求完美，你永远都不会满足。”——列夫·托尔斯泰（Leo Tolstoy）</p>
</blockquote>
<p>在理想世界中，追求完美不仅高尚，而且会得到回报。在我们生活的这个世界，这是产生挫折感的根源和对时间的巨大浪费。根据心理治疗师梅尔·施瓦兹（Mel Schwartz）的说法：“最接近完美的事物就是能够完全活在当下。没有任何对我们自己进行评估或打分的想法让我们分神，我们自由地活在当下。正是在当下我们才真正活着。然而，完美主义者往往并不活在当下，他们不是忙着批评过去就是反复回想他们的每一个决定或者为他们未来的决定忧心。”</p>
<p>知道什么时候要向前推进，并制定能够取得成果的现实目标。追求完美会让你在前进的道路上停下脚步，或者浪费你原本可以更有成效地用到别处的精力。</p>
<h2 id="3-避免风险"><a href="#3-避免风险" class="headerlink" title="3. 避免风险"></a>3. 避免风险</h2><blockquote>
<p>“没有勇气离开此岸，如何能到达新的彼岸。”——威廉·福克纳（William Faulkner）</p>
</blockquote>
<p>除非你是一位金融界的注册风险管理师（CRM），否则完全规避风险的策略无法让你在职业生涯中取得成功。当然，让你像好莱坞特技演员那样接受风险也不是最有效的办法。你必须接受适度的风险，帮助你学习和成长。没有风险，你会在周围的人事业腾飞之际裹足不前。你应该在是否有助于你达成目标的基础上对风险做出评估，然后坚定地追求那些最有机会让你取得进展的目标。</p>
<h2 id="4-让恐惧阻碍进展"><a href="#4-让恐惧阻碍进展" class="headerlink" title="4. 让恐惧阻碍进展"></a>4. 让恐惧阻碍进展</h2><blockquote>
<p>“船舶停在港湾是安全的，但这并不是造船的目的。”——威廉·G.T. 谢特（William G.T. Shedd）</p>
</blockquote>
<p>恐惧能阻止你前进的步伐。它造成的破坏会导致停滞。它往往出于疯狂的想象，负面的意象远远超出了现实的情况。如果恐惧阻碍了你的进展，那么你需要从转换心境开始。让恐惧成为帮助你迈出重要第一步的动力，而不要让它将你困在起跑线上。</p>
<h2 id="5-被动响应与主动规划"><a href="#5-被动响应与主动规划" class="headerlink" title="5. 被动响应与主动规划"></a>5. 被动响应与主动规划</h2><blockquote>
<p>“不制订计划就是在计划如何失败。”——阿兰·拉金（Alan Lakein）</p>
</blockquote>
<p>成功人士都有计划。他们制订目标、对过程进行规划。他们对成功进行衡量并不时重新校准。如果你发现你每天的大部分工作都是在对其他人的危机做出回应或者回复你收件箱中的任何邮件，那么你是在浪费精力和时间。除非你是在消防部门工作，否则在紧急情况发生后才做出响应，这样的战略不会让你成功。在一堆只会导致你从原定计划上分心的要求把你搞得焦头烂额之际，你有三个工具让自己重回正轨：委派给他人、或礼貌地简短回复，或直接点击“删除”。牢记你的目标。在每天结束时，问问自己你的目标取得了何种进展。</p>
<h2 id="6-修补弱项"><a href="#6-修补弱项" class="headerlink" title="6. 修补弱项"></a>6. 修补弱项</h2><blockquote>
<p>“多年来，我了解到自信的人不会把注意力集中在他们的弱项上——他们最大限度地发挥自己的长处。”——乔伊斯·梅尔（Joyce Meyer）</p>
</blockquote>
<p>如果你的演讲了无生趣，到了台上就紧张不安，而你的目标又是成为销售部门的头，那么你需要继续进行演讲，因为它对你的成功至关重要。然而，大多数弱项并不需要你予以注意和弥补。当你花时间“改进”与你的目标没有关联的弱项时，你挤占了可以取得成效的事情所需的时间。把过多时间花在弱项上将导致平庸。如果你把这些时间用在与你目标有关的优势上并最大程度发挥你的长处，你会精通此项技能，脱颖而出并吸引那些能决定你命运的人的注意就不难了。这是让你走上成功之路的最有效方式。避开平庸之处，专注于你的长项。</p>
<h2 id="7-单干"><a href="#7-单干" class="headerlink" title="7. 单干"></a>7. 单干</h2><blockquote>
<p>“如果勇敢无畏，并且保持专注，一个人的力量会很强大，但很多人合作的力量会更强大。”——格洛丽亚·马卡帕加尔·阿罗约（Gloria Macapagal Arroyo）</p>
</blockquote>
<p>这对我们中的一些人来说是最大的挑战：认为我们无所不能，靠自己可以搞定一切。这个世界上最多才多艺的人却持不同看法。他们身边围绕着一大群人，他们建立起持续终生的伙伴关系，加入全球最顶级专业人士的团体。如果你单干，你唯一的伴侣将是那些你并不擅长或不喜欢干的事情。</p>
<h2 id="8-身边围绕着一群与你相似的人"><a href="#8-身边围绕着一群与你相似的人" class="headerlink" title="8. 身边围绕着一群与你相似的人"></a>8. 身边围绕着一群与你相似的人</h2><blockquote>
<p>“优势在于差异性，而非相似性。”——史蒂芬·科维（Stephen R. Covey）</p>
</blockquote>
<p>身边的人都和你一样而带给你的舒适感受，会产生负面影响。它导致了盲目性，让你通过极为狭隘的视角看待世界。我们都看到过经理人只爱招聘和他们类似的人员，我们身边都有只会说“是”的男同事和女同事。他们让无知指引行动。最成功的领导者会让自己的身边围绕着各种各样的人，这些人挑战他的想法和行动，扩大他的视野并给予他启发，为他带来更加辉煌的成果。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="http://f.cl.ly/items/0e2Z2Y1r0s2h1d3Z2Q0u/Image%202016-05-20%20at%205.18.05%20PM.png" alt="翻盖的乌龟">
          <p class="site-author-name" itemprop="name">翻盖的乌龟</p>
          <p class="site-description motion-element" itemprop="description">沙滩一躺三年半，大浪来时我翻身。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">翻盖的乌龟</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
